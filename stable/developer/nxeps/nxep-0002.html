
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>NXEP 2 — API design of view slices &#8212; NetworkX 3.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'developer/nxeps/nxep-0002';</script>
    <link rel="canonical" href="https://networkx.org/documentation/stable/developer/nxeps/nxep-0002.html" />
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within NetworkX 3.0 documentation"
          href="../../_static/opensearch.xml"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="NXEP 3 — Graph Builders" href="nxep-0003.html" />
    <link rel="prev" title="NXEP 1 — Governance and Decision Making" href="nxep-0001.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="light">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">

  
  
  
  
  
  
  

  
    <img src="../../_static/networkx_banner.svg" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/networkx_banner.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../install.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorial.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/index.html">
                        Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../auto_examples/index.html">
                        Gallery
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Developer
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../release/index.html">
                        Releases
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://networkx.org/nx-guides/">
                    Guides
                  </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://networkx.org" title="Home Page" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-home"></i></span>
            <label class="sr-only">Home Page</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/networkx/networkx" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <ul class="navbar-nav">
  <li class="mr-2 dropdown">
    <button
      type="button"
      class="btn btn-version btn-sm navbar-btn dropdown-toggle"
      id="dLabelMore"
      data-toggle="dropdown"
    >
      v3.0
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" aria-labelledby="dLabelMore">
      <li>
        <a href="https://networkx.org/documentation/latest/index.html"
          >devel (latest)</a
        >
      </li>
      <li>
        <a href="https://networkx.org/documentation/stable/index.html"
          >current (stable)</a
        >
      </li>
    </ul>
  </li>
</ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../install.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorial.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/index.html">
                        Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../auto_examples/index.html">
                        Gallery
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Developer
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../release/index.html">
                        Releases
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://networkx.org/nx-guides/">
                    Guides
                  </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://networkx.org" title="Home Page" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-home"></i></span>
            <label class="sr-only">Home Page</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/networkx/networkx" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <ul class="navbar-nav">
  <li class="mr-2 dropdown">
    <button
      type="button"
      class="btn btn-version btn-sm navbar-btn dropdown-toggle"
      id="dLabelMore"
      data-toggle="dropdown"
    >
      v3.0
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" aria-labelledby="dLabelMore">
      <li>
        <a href="https://networkx.org/documentation/latest/index.html"
          >devel (latest)</a
        >
      </li>
      <li>
        <a href="https://networkx.org/documentation/stable/index.html"
          >current (stable)</a
        >
      </li>
    </ul>
  </li>
</ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about_us.html">About Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../values.html">Mission and Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects.html">Mentored Projects</a></li>

<li class="toctree-l1"><a class="reference internal" href="../new_contributor_faq.html">New Contributor FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_developer.html">Core Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecations.html">Deprecations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">NXEPs</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nxep-0000.html">NXEP 0 — Purpose and Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="nxep-0001.html">NXEP 1 — Governance and Decision Making</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">NXEP 2 — API design of view slices</a></li>
<li class="toctree-l2"><a class="reference internal" href="nxep-0003.html">NXEP 3 — Graph Builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="nxep-0004.html">NXEP 4 — Adopting <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.random.Generator</span></code> as default random interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="nxep-template.html">NXEP X — Template and Instructions</a></li>
</ul>
</li>
</ul>

  </div>
</nav>
    </div>
    <div class="sidebar-start-items__item">
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="nxep-2-api-design-of-view-slices">
<span id="nxep2"></span><h1>NXEP 2 — API design of view slices<a class="headerlink" href="#nxep-2-api-design-of-view-slices" title="Permalink to this heading">#</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mridul Seth</p>
</dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><p>Accepted</p>
</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Standards Track</p>
</dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even"><p>2020-07-23</p>
</dd>
</dl>
<section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this heading">#</a></h2>
<p>Iterating over a subset of nodes or edges in a graph is a very common
operation in networkx analysis.
The graph classes in NetworkX (e.g. <a class="reference internal" href="../../reference/classes/graph.html#networkx.Graph" title="networkx.Graph"><code class="xref py py-class docutils literal notranslate"><span class="pre">Graph</span></code></a>,
<a class="reference internal" href="../../reference/classes/digraph.html#networkx.DiGraph" title="networkx.DiGraph"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiGraph</span></code></a>, <a class="reference internal" href="../../reference/classes/multigraph.html#networkx.MultiGraph" title="networkx.MultiGraph"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiGraph</span></code></a>, etc.) expose the
node and edge data of the graph via <a class="reference internal" href="../../reference/classes/generated/networkx.Graph.nodes.html#networkx.Graph.nodes" title="networkx.Graph.nodes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nodes()</span></code></a> and
<a class="reference internal" href="../../reference/classes/generated/networkx.Graph.edges.html#networkx.Graph.edges" title="networkx.Graph.edges"><code class="xref py py-meth docutils literal notranslate"><span class="pre">edges()</span></code></a>, which return dict view objects, <code class="xref py py-obj docutils literal notranslate"><span class="pre">NodeView</span></code>
(or <code class="xref py py-obj docutils literal notranslate"><span class="pre">NodeDataView</span></code>) and <code class="xref py py-obj docutils literal notranslate"><span class="pre">EdgeView</span></code> (or <code class="xref py py-obj docutils literal notranslate"><span class="pre">EdgeDataView</span></code>), respectively.
The node and edge <code class="xref py py-obj docutils literal notranslate"><span class="pre">View</span></code> classes have dict-like semantics for item access,
returning the data dict corresponding to a given node or edge.
This NXEP proposes adding support for slicing to the relevant node &amp; edge
<code class="xref py py-obj docutils literal notranslate"><span class="pre">View</span></code> classes.</p>
</section>
<section id="motivation-and-scope">
<h2>Motivation and Scope<a class="headerlink" href="#motivation-and-scope" title="Permalink to this heading">#</a></h2>
<p>While accessing Graph data with <code class="xref py py-obj docutils literal notranslate"><span class="pre">G.nodes</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">G.edges</span></code>, the only way of slicing the data
is by casting the view to a list manually and then calling a slice on it.
A slice inherently implies an ordering of the elements. We intend to use the ordering
imposed on the nodes and edges by the iteration order (due to the adjacency data structure).</p>
<p><code class="docutils literal notranslate"><span class="pre">G.nodes(data=True)</span></code> returns a NodeDataView of all the nodes, <code class="docutils literal notranslate"><span class="pre">G.nodes(data=True)[x]</span></code> returns an attribute dictionary for the node x.
The current way of getting a slice out of the underlying dict view is to cast it to list and then
slice it <code class="docutils literal notranslate"><span class="pre">list(G.nodes(data=True))[0:10]</span></code>. This bit of code is something that is written a lot of times
by users. For graphs with a lot of nodes and edges, <code class="docutils literal notranslate"><span class="pre">G.nodes</span></code> and <code class="docutils literal notranslate"><span class="pre">G.edges</span></code> will take a lot of screen space and
when the users try to slice the resulting view (the first instinct) it will error out. Users definitely need to go through
a couple of documentation links before they realise that they need to first cast this NodeDataView to a list and then create
a slice. Updating the documentation to make this more clear would be helpful.
But it also seems good to ease the complexity of this common idiom.</p>
<p>In this NXEP we propose to move the casting as list inside the Node(data)View methods.
Thus <code class="docutils literal notranslate"><span class="pre">list(G.nodes(data=True))[0:10]</span></code> either becomes <code class="docutils literal notranslate"><span class="pre">G.nodes(data=True)[0:10]</span></code>
or it is provided by a new slicing method like <code class="docutils literal notranslate"><span class="pre">G.nodes(data=True).slice(10)</span></code>
or a new slicing object to allow subscripting like <code class="docutils literal notranslate"><span class="pre">G.nodes(data=True).slice[0:10:2]</span></code>.
Then users can get a small subset of nodes by creating a slice.</p>
<section id="motivating-use-case">
<h3>Motivating Use-Case<a class="headerlink" href="#motivating-use-case" title="Permalink to this heading">#</a></h3>
<p>It is common to use <a class="reference internal" href="../../reference/classes/generated/networkx.Graph.nodes.html#networkx.Graph.nodes" title="networkx.Graph.nodes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nodes()</span></code></a> and
<a class="reference internal" href="../../reference/classes/generated/networkx.Graph.edges.html#networkx.Graph.edges" title="networkx.Graph.edges"><code class="xref py py-meth docutils literal notranslate"><span class="pre">edges()</span></code></a> when using NetworkX interactively, e.g. in a
terminal.
If a graph has very many components (i.e. edges or nodes) then the <a class="reference external" href="https://docs.python.org/3/library/functions.html#repr" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">repr</span></code></a> of
<code class="xref py py-obj docutils literal notranslate"><span class="pre">View</span></code> object may be very long:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">complete_graph</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>   <span class="c1"># A graph with 4950 edges</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">edges</span>                      <span class="c1"># Output suppressed</span>
</pre></div>
</div>
<p>In this case, the first instinct of the user is often to inspect only the first
few edges, say 10, via slicing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="go">Traceback (most recent call last)</span>
<span class="go">   ...</span>
<span class="go">TypeError: cannot unpack non-iterable slice object</span>
</pre></div>
</div>
<p>The resulting <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TypeError</span></code></a> is opaque and hard to understand in the context of
what was originally intended.</p>
</section>
</section>
<section id="usage-and-impact">
<h2>Usage and Impact<a class="headerlink" href="#usage-and-impact" title="Permalink to this heading">#</a></h2>
<p>The main impact and the decision that needs to be taken in this NXEP is with
respect to the user facing API. By implementing this NXEP via subscripting NodeViews,
we may end up adding some ambiguity for users. As for example <code class="xref py py-obj docutils literal notranslate"><span class="pre">G.nodes[x]</span></code>
will return an attribute dict but <code class="xref py py-obj docutils literal notranslate"><span class="pre">G.nodes[0:5]</span></code> will return a list of first five nodes.
This will be more ambigious with EdgeView as <code class="docutils literal notranslate"><span class="pre">G.edges[0,</span> <span class="pre">1]</span></code> will return an
attribute dictionary of the edge between 0 and 1 and <code class="docutils literal notranslate"><span class="pre">G.edges[0:1]</span></code> will return the first edge.
We need to find a way to counter this potential confusion.
The alternative proposal of a new slicing method is one possible solution.</p>
<p>For a historical context, in pre 2.0 NetworkX, G.nodes() and G.edges() returned lists.
So, slicing was native behavior like <code class="docutils literal notranslate"><span class="pre">G.nodes()[:10]</span></code>. One caveat is that the order
of that list could change from one call to the next if the adjacency structure changed
between calls.</p>
<p>In more detail, in pre 2.0 NetworkX, there were 3 ways to access node information:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">G.node</span></code> was a dict keyed by node to that node’s attribute dict as a value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">G.nodes()</span></code> returned a list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">G.nodes_iter()</span></code> returned an iterator over the nodes.</p></li>
</ul>
<p>In line with Python 3’s move toward returning dict views and iterators rather than lists,
NetworkX 2.0 introduced a single interface for node information. <code class="docutils literal notranslate"><span class="pre">G.nodes</span></code> is a
dict-like object keyed by node to that node’s attribute dict.
It also provides set-like operations on the nodes. And it offers a method <code class="docutils literal notranslate"><span class="pre">G.nodes.data</span></code>
which provides an interface similar to <code class="docutils literal notranslate"><span class="pre">dict.items</span></code> but pulling out specific attributes
from the inner attribute dict rather than the entire dict. Functional synonyms
<code class="docutils literal notranslate"><span class="pre">G.nodes(data=&quot;cost&quot;,</span> <span class="pre">default=1)</span></code> and <code class="docutils literal notranslate"><span class="pre">G.nodes.data(&quot;cost&quot;,</span> <span class="pre">1)</span></code> allow an interface
that looks like a dict keyed by node to a specific node attribute.</p>
<p>Slicing was not provided in NetworkX 2.0 primarily because there was
no inherent order to the nodes or edges as stored in the
dict-of-dict-of-dict data structure. However, in Python 3.6, dicts
became ordered based on insertion order. So, nodes are ordered based
on when they were added to the graph and edges are ordered based on the
adjacency dict-of-dict structure. So, there is now a concept of the “first edge”.</p>
<p>With this NXEP we would like to bring the intuitiveness
of slicing behavior back to <code class="docutils literal notranslate"><span class="pre">G.edges</span></code> and <code class="docutils literal notranslate"><span class="pre">G.nodes</span></code> using the node
add order and edge order based on adjacency storage.</p>
<p>On the computational front, if we create lists to allow slices, we use memory to store the lists.
This is something user would have anyway done with something like <code class="docutils literal notranslate"><span class="pre">list(G.nodes(data=True))[0:10]</span></code>.
But we can do better with our slicing mechanisms.
We should be able to avoid constucting the entire list simply to get the slices by internally
using code like: <code class="docutils literal notranslate"><span class="pre">indx=[n</span> <span class="pre">for</span> <span class="pre">i,</span> <span class="pre">n</span> <span class="pre">in</span> <span class="pre">enumerate(G.nodes(data=True))</span> <span class="pre">if</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(x.start,</span> <span class="pre">x.stop,</span> <span class="pre">s.step)]</span></code>
where x is the desired slice object.</p>
</section>
<section id="backward-compatibility">
<h2>Backward compatibility<a class="headerlink" href="#backward-compatibility" title="Permalink to this heading">#</a></h2>
<p>N/A</p>
</section>
<section id="detailed-description">
<h2>Detailed description<a class="headerlink" href="#detailed-description" title="Permalink to this heading">#</a></h2>
<p>The new implementation will let users slice Node(Data)View and Edge(Data)View.</p>
<p>The following code will be valid:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p>Prelimanary impelementation work is available at <a class="github reference external" href="https://github.com/networkx/networkx/pull/4086">networkx/networkx#4086</a></p>
<p>Alternatively, to get rid of the ambiguity in slicing API with respect to
the dict views we can implement a new
<code class="docutils literal notranslate"><span class="pre">slice</span></code> method which leads to a less ambigious API.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">slice</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">slice</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">30</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">slice</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">40</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">slice</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
</pre></div>
</div>
</section>
<section id="related-work">
<h2>Related Work<a class="headerlink" href="#related-work" title="Permalink to this heading">#</a></h2>
<p>N/A</p>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading">#</a></h2>
<p>A reference implementation is proposed in
<a class="reference external" href="https://github.com/networkx/networkx/pull/4086/files">#4086</a>.</p>
<p>The core of this NXEP is to implement <code class="docutils literal notranslate"><span class="pre">slicing</span></code> to Node(Data)View
and Edge(Data)View to allow users to access a subset of nodes and edges without casting them
first to a list. We will do this by adding a check of <code class="docutils literal notranslate"><span class="pre">slice</span></code> in the getitem dunder method of
Node(Data)View and Edge(Data)View and returning a list of the sliced values.
For example, the <code class="xref py py-obj docutils literal notranslate"><span class="pre">__getitem__</span></code> method for <code class="xref py py-obj docutils literal notranslate"><span class="pre">NodeView</span></code> might look something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">)</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
</pre></div>
</div>
<p>We can instead move the check for <code class="docutils literal notranslate"><span class="pre">slice</span></code> to an independent <code class="docutils literal notranslate"><span class="pre">slice</span></code> method for nodes and edges to
implement this NXEP.</p>
</section>
<section id="alternatives">
<h2>Alternatives<a class="headerlink" href="#alternatives" title="Permalink to this heading">#</a></h2>
<p>The following list summarizes some alternatives to modifying the <code class="xref py py-obj docutils literal notranslate"><span class="pre">__getitem__</span></code>
of the various <code class="xref py py-obj docutils literal notranslate"><span class="pre">View</span></code> classes.
The listed alternatives are not mutually exclusive.</p>
<ul>
<li><p><strong>Improved Documentation</strong> - Add more explicit documentation about the
necessity of casting Node(Data)View and Edge(Data)View objects to lists in
order to be able to use slicing.</p></li>
<li><p><strong>Improved Exceptions</strong> - Currently, users see the following exception when
attempting to slice a <code class="xref py py-obj docutils literal notranslate"><span class="pre">View</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="go">Traceback (most recent call last)</span>
<span class="go">   ...</span>
<span class="go">TypeError: unhashable type: &#39;slice&#39;</span>
</pre></div>
</div>
<p>The exception message is not very useful in the context of accessing a subset
of nodes or edges of a graph.
A more specific exception message could be something along the lines of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="go">Traceback (most recent call last)</span>
<span class="go">   ...</span>
<span class="go">NetworkXError: NodeView does not support slicing. Try list(G.nodes)[0:10].</span>
</pre></div>
</div>
</li>
<li><p>Instead of changing the behavior of <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> we can impelment a new
method, something like <code class="docutils literal notranslate"><span class="pre">G.nodes.head(x)</span></code> (insipired by pandas) which
returns the first x nodes.
This approach could be expanded to using a <code class="docutils literal notranslate"><span class="pre">slice</span></code> object directly but
interfacing it with an independent <code class="docutils literal notranslate"><span class="pre">slice</span></code> method of G.nodes and G.edges
instead of implementing it in getitem dunder method.</p>
<ul class="simple">
<li><p>The nice colon syntax for slices is only available with subscript notation.
To allow G.nodes.slice to use the nice colon syntax, we could make it a
property that creates a subscriptable object. Syntax would be <code class="docutils literal notranslate"><span class="pre">G.nodes.slice[4:9:2]</span></code>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="discussion">
<h2>Discussion<a class="headerlink" href="#discussion" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="github reference external" href="https://github.com/networkx/networkx/pull/4086">networkx/networkx#4086</a></p></li>
</ul>
<p>The motivating example for the NXEP is the use-case where users want to
introspect a subset (usually the first few) of the nodes and/or edges.
If we look at the changes proposed by this NXEP and the listed alternatives,
there are several ways that this use-case might be improved.</p>
<ol class="arabic simple">
<li><p>Add a descriptive error message when users try to access <code class="docutils literal notranslate"><span class="pre">View</span></code> objects
with a slice object.</p></li>
<li><p>Add specialized methods to the slice object (e.g. <code class="docutils literal notranslate"><span class="pre">head()</span></code> and <code class="docutils literal notranslate"><span class="pre">tail()</span></code>
or <code class="docutils literal notranslate"><span class="pre">slice()</span></code> that provide functionality useful for introspection.</p></li>
<li><p>The approach this NXEP proposes - modify <code class="docutils literal notranslate"><span class="pre">View.__getitem__</span></code> to add
Sequence semantics.</p></li>
</ol>
<p>Option 1 (better error messages) changes neither API nor behavior and would
help guide users to the correct solution for the introspection use-case.
The downside is that it does not offer the same level of convenience that
support for slicing does.</p>
<p>Option 2 (<code class="docutils literal notranslate"><span class="pre">head</span></code>, <code class="docutils literal notranslate"><span class="pre">tail</span></code>, and/or <code class="docutils literal notranslate"><span class="pre">slice</span></code> methods) would add new methods
to view a subset of the nodes/edges.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">path_graph</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">()</span>
<span class="go">NodeView((0, 1, 2, 3, 4, 5, 6, 7, 8, 9))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>   <span class="c1"># Display the first three nodes</span>
<span class="go">NodeView((0, 1, 2))</span>
</pre></div>
</div>
<p>One drawback of the approach is that is introduces new API, which has to be
both discoverable and intuitive in order to make node/edge viewing more
convenient.
For example, is <code class="docutils literal notranslate"><span class="pre">G.nodes().head(3)</span></code> or <code class="docutils literal notranslate"><span class="pre">G.nodes().slice(0,</span> <span class="pre">10,</span> <span class="pre">2)</span></code>
more convenient than <code class="docutils literal notranslate"><span class="pre">list(G.nodes())[:3]</span></code> or <code class="docutils literal notranslate"><span class="pre">list(G.nodes())[0:10:2]</span></code>,
respectively?
Another complication involves choosing the names for the new methods.
<code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span></code> are intuitive for users coming from <code class="xref py py-obj docutils literal notranslate"><span class="pre">*nix</span></code> backgrounds
and have been adopted by other popular libraries like <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/index.html#module-pandas" title="(in pandas v1.5.2)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas</span></code></a>.
However, <code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span></code> also have meaning in the context of network
science pertaining to e.g. graph edges.
For example, a user might reasonably assume that <code class="docutils literal notranslate"><span class="pre">G.edges().tail()</span></code> would
give the set of source nodes in a directed graph, instead of the last <code class="xref py py-obj docutils literal notranslate"><span class="pre">n</span></code>
edges.</p>
<p>Option 3 (add sequence semantics to <code class="xref py py-obj docutils literal notranslate"><span class="pre">View</span></code> objects) is arguably the most
convenient as it doesn’t involve raising any error messages.
However, overriding the behavior of <code class="xref py py-obj docutils literal notranslate"><span class="pre">*View.__getitem__</span></code> to mix Mapping and
Sequence semantics is a relatively pervasive change that may have
unforeseen consequences for some use-cases.
Furthermore there is precedent in Python itself for returning un-sliceable view
objects from some mappings, a notable example being the <code class="xref py py-obj docutils literal notranslate"><span class="pre">dict_keys</span></code> and
<code class="xref py py-obj docutils literal notranslate"><span class="pre">dict_values</span></code> objects returned when accessing components in dictionaries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
<span class="go">Traceback (most recent call last)</span>
<span class="go">   ...</span>
<span class="go">TypeError: &#39;dict_values&#39; object is not subscriptable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
<span class="go">[3, 4, 5]</span>
</pre></div>
</div>
<p>Since Python dictionaries are now ordered by default (as of 3.6 in CPython),
this behavior may change in the future.</p>
<p>Given the considerations associated with the listed options, the following
course of action is proposed:</p>
<ul>
<li><p><strong>Adopt option 1</strong> - more informative error messages for the motivating
use-case (e.g. <code class="docutils literal notranslate"><span class="pre">G.edges()[0:10]</span></code>) alleviates the need for users to go
digging through the documentation to find/remember how to get the
desired behavior.
Since no new API is introduced nor are there any backwards compatibility
concerns, this change doesn’t require any further design discussion.
It is possible that this change is enough to resolve the motivating
use-case satisfactorily - monitor user feedback.</p></li>
<li><p>Option 2 doesn’t require any further discussion in a design doc (i.e. NXEP).
New methods along the lines discussed above can be proposed via PR.</p></li>
<li><p>Defer implementing option 3 for now, but reconsider if:</p>
<blockquote>
<div><ul class="simple">
<li><p>The improved error message is not in itself a sufficient solution</p></li>
<li><p>Other use-cases are identified for which adding slicing to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">*View</span></code>
objects would be a nice improvement (e.g. improved performance).</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="resolution">
<h2>Resolution<a class="headerlink" href="#resolution" title="Permalink to this heading">#</a></h2>
<p>To make slicing intuitive for new users, we went ahead with <strong>Option 1</strong> in the
discussion above. Users will now see <code class="xref py py-obj docutils literal notranslate"><span class="pre">NetworkXError</span></code> when they try to slice a
<code class="xref py py-obj docutils literal notranslate"><span class="pre">*View</span></code> object.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="go">Traceback (most recent call last)</span>
<span class="go">   ...</span>
<span class="go">NetworkXError: EdgeView does not support slicing, try list(G.edges)[0:10:None]</span>
</pre></div>
</div>
<p>The implementation is available at <a class="github reference external" href="https://github.com/networkx/networkx/pull/4300">networkx/networkx#4300</a> and
<a class="github reference external" href="https://github.com/networkx/networkx/pull/4304">networkx/networkx#4304</a>.</p>
</section>
</section>


            </article>
            
            
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#abstract">
   Abstract
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation-and-scope">
   Motivation and Scope
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#motivating-use-case">
     Motivating Use-Case
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage-and-impact">
   Usage and Impact
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#backward-compatibility">
   Backward compatibility
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#detailed-description">
   Detailed description
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#related-work">
   Related Work
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#implementation">
   Implementation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#alternatives">
   Alternatives
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#discussion">
   Discussion
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#resolution">
   Resolution
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2004-2023, NetworkX Developers.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">
        PyData Sphinx Theme
    </a>
    0.12.0.
</p>
  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.2.3.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>