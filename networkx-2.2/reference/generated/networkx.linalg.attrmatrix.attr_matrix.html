

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>networkx.linalg.attrmatrix.attr_matrix &mdash; NetworkX 2.2 documentation</title>
  

  
  
  
  

  

  
  
    
      <link rel="search" type="application/opensearchdescription+xml"
            title="Search within NetworkX 2.2 documentation"
            href="../../_static/opensearch.xml"/>
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="networkx.linalg.attrmatrix.attr_sparse_matrix" href="networkx.linalg.attrmatrix.attr_sparse_matrix.html" />
    <link rel="prev" title="networkx.linalg.algebraicconnectivity.spectral_ordering" href="networkx.linalg.algebraicconnectivity.spectral_ordering.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> NetworkX
          

          
          </a>

          
            
            
              <div class="version">
                2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classes/index.html">Graph types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/index.html">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generators.html">Graph generators</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../linalg.html">Linear algebra</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../linalg.html#module-networkx.linalg.graphmatrix">Graph Matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../linalg.html#module-networkx.linalg.laplacianmatrix">Laplacian Matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../linalg.html#module-networkx.linalg.spectrum">Spectrum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../linalg.html#module-networkx.linalg.algebraicconnectivity">Algebraic Connectivity</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../linalg.html#module-networkx.linalg.attrmatrix">Attribute Matrices</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">networkx.linalg.attrmatrix.attr_matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="networkx.linalg.attrmatrix.attr_sparse_matrix.html">networkx.linalg.attrmatrix.attr_sparse_matrix</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../linalg.html#module-networkx.linalg.modularitymatrix">Modularity Matrices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../convert.html">Converting to and from other data formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../relabel.html">Relabeling nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../readwrite/index.html">Reading and writing graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drawing.html">Drawing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../randomness.html">Randomness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../news.html">Release Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html">Examples</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NetworkX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Reference</a> &raquo;</li>
        
          <li><a href="../linalg.html">Linear algebra</a> &raquo;</li>
        
      <li>networkx.linalg.attrmatrix.attr_matrix</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="networkx-linalg-attrmatrix-attr-matrix">
<h1>networkx.linalg.attrmatrix.attr_matrix<a class="headerlink" href="#networkx-linalg-attrmatrix-attr-matrix" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="networkx.linalg.attrmatrix.attr_matrix">
<code class="descname">attr_matrix</code><span class="sig-paren">(</span><em>G</em>, <em>edge_attr=None</em>, <em>node_attr=None</em>, <em>normalized=False</em>, <em>rc_order=None</em>, <em>dtype=None</em>, <em>order=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/networkx/linalg/attrmatrix.html#attr_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networkx.linalg.attrmatrix.attr_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a NumPy matrix using attributes from G.</p>
<p>If only <code class="xref py py-obj docutils literal notranslate"><span class="pre">G</span></code> is passed in, then the adjacency matrix is constructed.</p>
<p>Let A be a discrete set of values for the node attribute <code class="xref py py-obj docutils literal notranslate"><span class="pre">node_attr</span></code>. Then
the elements of A represent the rows and columns of the constructed matrix.
Now, iterate through every edge e=(u,v) in <code class="xref py py-obj docutils literal notranslate"><span class="pre">G</span></code> and consider the value
of the edge attribute <code class="xref py py-obj docutils literal notranslate"><span class="pre">edge_attr</span></code>.  If ua and va are the values of the
node attribute <code class="xref py py-obj docutils literal notranslate"><span class="pre">node_attr</span></code> for u and v, respectively, then the value of
the edge attribute is added to the matrix element at (ua, va).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>G</strong> (<em>graph</em>) – The NetworkX graph used to construct the NumPy matrix.</li>
<li><strong>edge_attr</strong> (<em>str, optional</em>) – Each element of the matrix represents a running total of the
specified edge attribute for edges whose node attributes correspond
to the rows/cols of the matirx. The attribute must be present for
all edges in the graph. If no attribute is specified, then we
just count the number of edges whose node attributes correspond
to the matrix element.</li>
<li><strong>node_attr</strong> (<em>str, optional</em>) – Each row and column in the matrix represents a particular value
of the node attribute.  The attribute must be present for all nodes
in the graph. Note, the values of this attribute should be reliably
hashable. So, float values are not recommended. If no attribute is
specified, then the rows and columns will be the nodes of the graph.</li>
<li><strong>normalized</strong> (<em>bool, optional</em>) – If True, then each row is normalized by the summation of its values.</li>
<li><strong>rc_order</strong> (<em>list, optional</em>) – A list of the node attribute values. This list specifies the ordering
of rows and columns of the array. If no ordering is provided, then
the ordering will be random (and also, a return value).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>dtype</strong> (<em>NumPy data-type, optional</em>) – A valid NumPy dtype used to initialize the array. Keep in mind certain
dtypes can yield unexpected results if the array is to be normalized.
The parameter is passed to numpy.zeros(). If unspecified, the NumPy
default is used.</li>
<li><strong>order</strong> (<em>{‘C’, ‘F’}, optional</em>) – Whether to store multidimensional data in C- or Fortran-contiguous
(row- or column-wise) order in memory. This parameter is passed to
numpy.zeros(). If unspecified, the NumPy default is used.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>M</strong> (<em>NumPy matrix</em>) – The attribute matrix.</li>
<li><strong>ordering</strong> (<em>list</em>) – If <code class="xref py py-obj docutils literal notranslate"><span class="pre">rc_order</span></code> was specified, then only the matrix is returned.
However, if <code class="xref py py-obj docutils literal notranslate"><span class="pre">rc_order</span></code> was None, then the ordering used to construct
the matrix is returned as well.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Construct an adjacency matrix:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>   <span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">legacy</span><span class="o">=</span><span class="s2">&quot;1.13&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<span class="gp">... </span>   <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nx</span><span class="o">.</span><span class="n">attr_matrix</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">rc_order</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">matrix([[ 0.,  1.,  1.],</span>
<span class="go">        [ 1.,  0.,  1.],</span>
<span class="go">        [ 1.,  1.,  0.]])</span>
</pre></div>
</div>
<p>Alternatively, we can obtain the matrix describing edge thickness.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nx</span><span class="o">.</span><span class="n">attr_matrix</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">edge_attr</span><span class="o">=</span><span class="s1">&#39;thickness&#39;</span><span class="p">,</span> <span class="n">rc_order</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">matrix([[ 0.,  1.,  2.],</span>
<span class="go">        [ 1.,  0.,  3.],</span>
<span class="go">        [ 2.,  3.,  0.]])</span>
</pre></div>
</div>
<p>We can also color the nodes and ask for the probability distribution over
all edges (u,v) describing:</p>
<blockquote>
<div>Pr(v has color Y | u has color X)</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rc</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nx</span><span class="o">.</span><span class="n">attr_matrix</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node_attr</span><span class="o">=</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="n">normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rc_order</span><span class="o">=</span><span class="n">rc</span><span class="p">)</span>
<span class="go">matrix([[ 0.33333333,  0.66666667],</span>
<span class="go">        [ 1.        ,  0.        ]])</span>
</pre></div>
</div>
<p>For example, the above tells us that for all edges (u,v):</p>
<blockquote>
<div><p>Pr( v is red  | u is red)  = 1/3
Pr( v is blue | u is red)  = 2/3</p>
<p>Pr( v is red  | u is blue) = 1
Pr( v is blue | u is blue) = 0</p>
</div></blockquote>
<p>Finally, we can obtain the total weights listed by the node colors.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nx</span><span class="o">.</span><span class="n">attr_matrix</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">edge_attr</span><span class="o">=</span><span class="s1">&#39;weight&#39;</span><span class="p">,</span> <span class="n">node_attr</span><span class="o">=</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="n">rc_order</span><span class="o">=</span><span class="n">rc</span><span class="p">)</span>
<span class="go">matrix([[ 3.,  2.],</span>
<span class="go">        [ 2.,  0.]])</span>
</pre></div>
</div>
<p>Thus, the total weight over all edges (u,v) with u and v having colors:</p>
<blockquote>
<div>(red, red)   is 3   # the sole contribution is from edge (0,1)
(red, blue)  is 2   # contributions from edges (0,2) and (1,2)
(blue, red)  is 2   # same as (red, blue) since graph is undirected
(blue, blue) is 0   # there are no edges with blue endpoints</div></blockquote>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="networkx.linalg.attrmatrix.attr_sparse_matrix.html" class="btn btn-neutral float-right" title="networkx.linalg.attrmatrix.attr_sparse_matrix" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="networkx.linalg.algebraicconnectivity.spectral_ordering.html" class="btn btn-neutral" title="networkx.linalg.algebraicconnectivity.spectral_ordering" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2004-2018, NetworkX Developers.
      Last updated on Sep 19, 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>